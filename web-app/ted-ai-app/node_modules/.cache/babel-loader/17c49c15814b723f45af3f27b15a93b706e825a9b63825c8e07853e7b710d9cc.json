{"ast":null,"code":"import{useState}from'react';import{CircleLoader}from'react-spinners';import insertDocument from'../apis/insertDocument';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DocumentUploader=_ref=>{let{setRefreshViewer}=_ref;const[selectedFile,setSelectedFile]=useState();const[isFilePicked,setIsFilePicked]=useState(false);const[isLoading,setIsLoading]=useState(false);const changeHandler=event=>{if(event.target&&event.target.files){setSelectedFile(event.target.files[0]);setIsFilePicked(true);}};const handleSubmission=()=>{if(selectedFile){setIsLoading(true);insertDocument(selectedFile).then(()=>{setRefreshViewer(true);setSelectedFile(undefined);setIsFilePicked(false);setIsLoading(false);});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"uploader\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"uploader__input\",type:\"file\",name:\"file-input\",id:\"file-input\",accept:\".pdf,.txt,.json,.md\",onChange:changeHandler}),/*#__PURE__*/_jsxs(\"label\",{className:\"uploader__label\",htmlFor:\"file-input\",children:[/*#__PURE__*/_jsx(\"svg\",{\"aria-hidden\":\"true\",focusable:\"false\",\"data-prefix\":\"fas\",\"data-icon\":\"upload\",className:\"svg-inline--fa fa-upload fa-w-16\",role:\"img\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 512 512\",children:/*#__PURE__*/_jsx(\"path\",{fill:\"currentColor\",d:\"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Upload file\"})]}),isFilePicked&&selectedFile?/*#__PURE__*/_jsx(\"div\",{className:\"uploader__details\",children:/*#__PURE__*/_jsx(\"div\",{className:\"uploader__details\",children:/*#__PURE__*/_jsx(\"p\",{children:selectedFile.name})})}):/*#__PURE__*/_jsx(\"div\",{className:\"uploader__details\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Select a file to insert\"})}),isFilePicked&&!isLoading&&/*#__PURE__*/_jsx(\"button\",{className:\"uploader__btn\",onClick:handleSubmission,children:\"Submit\"}),isLoading&&/*#__PURE__*/_jsx(CircleLoader,{color:\"#00f596\",className:\"uploader__loader\"})]});};export default DocumentUploader;","map":{"version":3,"names":["useState","CircleLoader","insertDocument","jsx","_jsx","jsxs","_jsxs","DocumentUploader","_ref","setRefreshViewer","selectedFile","setSelectedFile","isFilePicked","setIsFilePicked","isLoading","setIsLoading","changeHandler","event","target","files","handleSubmission","then","undefined","className","children","type","name","id","accept","onChange","htmlFor","focusable","role","xmlns","viewBox","fill","d","onClick","color"],"sources":["/Users/tedj/Ted-pjt/python_pjt/LlamaIndex/web-app/ted-ai-app/src/components/DocumentUploader.tsx"],"sourcesContent":["import { ChangeEvent, useState } from 'react';\nimport { CircleLoader } from 'react-spinners';\nimport insertDocument from '../apis/insertDocument';\n\ninterface HTMLInputEvent extends ChangeEvent {\n  target: HTMLInputElement & EventTarget;\n}\n\ntype DocumentUploaderProps = {\n  setRefreshViewer: (refresh: boolean) => void;\n};\n\nconst DocumentUploader = ({ setRefreshViewer }: DocumentUploaderProps) => {\n  const [selectedFile, setSelectedFile] = useState<File>();\n  const [isFilePicked, setIsFilePicked] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const changeHandler = (event: HTMLInputEvent) => {\n    if (event.target && event.target.files) {\n      setSelectedFile(event.target.files[0]);\n      setIsFilePicked(true);\n    }\n  };\n\n  const handleSubmission = () => {\n    if (selectedFile) {\n      setIsLoading(true);\n      insertDocument(selectedFile).then(() => {\n        setRefreshViewer(true);\n        setSelectedFile(undefined);\n        setIsFilePicked(false);\n        setIsLoading(false);\n      });\n    }\n  };\n\n  return (\n    <div className='uploader'>\n      <input\n        className='uploader__input'\n        type='file'\n        name='file-input'\n        id='file-input'\n        accept='.pdf,.txt,.json,.md'\n        onChange={changeHandler}\n      />\n      <label className='uploader__label' htmlFor='file-input'>\n        <svg\n          aria-hidden='true'\n          focusable='false'\n          data-prefix='fas'\n          data-icon='upload'\n          className='svg-inline--fa fa-upload fa-w-16'\n          role='img'\n          xmlns='http://www.w3.org/2000/svg'\n          viewBox='0 0 512 512'\n        >\n          <path\n            fill='currentColor'\n            d='M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z'\n          ></path>\n        </svg>\n        <span>Upload file</span>\n      </label>\n      {isFilePicked && selectedFile ? (\n        <div className='uploader__details'>\n          <div className='uploader__details'>\n            <p>{selectedFile.name}</p>\n          </div>\n        </div>\n      ) : (\n        <div className='uploader__details'>\n          <p>Select a file to insert</p>\n        </div>\n      )}\n\n      {isFilePicked && !isLoading && (\n        <button className='uploader__btn' onClick={handleSubmission}>\n          Submit\n        </button>\n      )}\n      {isLoading && <CircleLoader color='#00f596' className='uploader__loader' />}\n    </div>\n  );\n};\n\nexport default DocumentUploader;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}