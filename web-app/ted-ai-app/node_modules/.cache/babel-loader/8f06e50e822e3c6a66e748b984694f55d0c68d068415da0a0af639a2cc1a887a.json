{"ast":null,"code":"import{useState}from'react';import{CircleLoader}from'react-spinners';import classNames from'classnames';import queryIndex from'../apis/queryIndex';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const IndexQuery=()=>{const[isLoading,setLoading]=useState(false);const[responseText,setResponseText]=useState('');const[responseSources,setResponseSources]=useState([]);const handleQuery=e=>{if(e.key=='Enter'){setLoading(true);queryIndex(e.currentTarget.value).then(response=>{setLoading(false);setResponseText(response.text);setResponseSources(response.sources);});}};const sourceElems=responseSources.map(source=>{const nodeTitle=source.doc_id.length>28?source.doc_id.substring(0,28)+'...':source.doc_id;const nodeText=source.text.length>150?source.text.substring(0,130)+'...':source.text;return/*#__PURE__*/_jsxs(\"div\",{className:\"query__sources__item\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"query__sources__item__id\",children:nodeTitle}),/*#__PURE__*/_jsx(\"p\",{className:\"query__sources__item__text\",children:nodeText}),/*#__PURE__*/_jsxs(\"p\",{className:\"query__sources__item__footer\",children:[\"Similarity=\",source.similarity,\", start=\",source.start,\", end=\",source.end]})]},source.doc_id);});return/*#__PURE__*/_jsxs(\"div\",{className:\"query\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"query__input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"query-text\",children:\"Ask a question!\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"query-text\",placeholder:\"Enter a question here\",onKeyDown:handleQuery})]}),/*#__PURE__*/_jsx(CircleLoader,{className:classNames('query__loader',{'query__loader--loading':isLoading}),color:\"#00f596\"}),/*#__PURE__*/_jsxs(\"div\",{className:classNames('query__results',{'query__results--loading':isLoading}),children:[/*#__PURE__*/_jsx(\"div\",{className:\"query__sources__item\",children:/*#__PURE__*/_jsx(\"p\",{className:\"query__sources__item__id\",children:\"Query Response\"})}),responseText]}),/*#__PURE__*/_jsxs(\"div\",{className:classNames('query__sources',{'query__sources--loading':isLoading}),children:[/*#__PURE__*/_jsx(\"div\",{className:\"query__sources__item\",children:/*#__PURE__*/_jsx(\"p\",{className:\"query__sources__item__id\",children:\"Response Sources\"})}),sourceElems]})]});};export default IndexQuery;","map":{"version":3,"names":["useState","CircleLoader","classNames","queryIndex","jsx","_jsx","jsxs","_jsxs","IndexQuery","isLoading","setLoading","responseText","setResponseText","responseSources","setResponseSources","handleQuery","e","key","currentTarget","value","then","response","text","sources","sourceElems","map","source","nodeTitle","doc_id","length","substring","nodeText","className","children","similarity","start","end","htmlFor","type","name","placeholder","onKeyDown","color"],"sources":["/Users/tedj/Ted-pjt/python_pjt/LlamaIndex/web-app/ted-ai-app/src/components/IndexQuery.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { CircleLoader } from 'react-spinners';\nimport classNames from 'classnames';\nimport queryIndex, { ResponseSources } from '../apis/queryIndex';\n\nconst IndexQuery = () => {\n  const [isLoading, setLoading] = useState(false);\n  const [responseText, setResponseText] = useState('');\n  const [responseSources, setResponseSources] = useState<ResponseSources[]>([]);\n\n  const handleQuery = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key == 'Enter') {\n      setLoading(true);\n      queryIndex(e.currentTarget.value).then((response) => {\n        setLoading(false);\n        setResponseText(response.text);\n        setResponseSources(response.sources);\n      });\n    }\n  };\n\n  const sourceElems = responseSources.map((source) => {\n    const nodeTitle =\n      source.doc_id.length > 28\n        ? source.doc_id.substring(0, 28) + '...'\n        : source.doc_id;\n    const nodeText =\n      source.text.length > 150 ? source.text.substring(0, 130) + '...' : source.text;\n\n    return (\n      <div key={source.doc_id} className='query__sources__item'>\n        <p className='query__sources__item__id'>{nodeTitle}</p>\n        <p className='query__sources__item__text'>{nodeText}</p>\n        <p className='query__sources__item__footer'>\n          Similarity={source.similarity}, start={source.start}, end=\n          {source.end}\n        </p>\n      </div>\n    );\n  });\n\n  return (\n    <div className='query'>\n      <div className='query__input'>\n        <label htmlFor='query-text'>Ask a question!</label>\n        <input\n          type='text'\n          name='query-text'\n          placeholder='Enter a question here'\n          onKeyDown={handleQuery}\n        ></input>\n      </div>\n\n      <CircleLoader\n        className={classNames('query__loader', {\n          'query__loader--loading': isLoading,\n        })}\n        color='#00f596'/>\n\n      <div\n        className={classNames('query__results', {\n          'query__results--loading': isLoading,\n        })}>\n        <div className='query__sources__item'>\n          <p className='query__sources__item__id'>Query Response</p>\n        </div>\n        {responseText}\n      </div>\n      <div\n        className={classNames('query__sources', {\n          'query__sources--loading': isLoading,\n        })}>\n        <div className='query__sources__item'>\n          <p className='query__sources__item__id'>Response Sources</p>\n        </div>\n        {sourceElems}\n      </div>\n    </div>\n  );\n};\n\nexport default IndexQuery;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}